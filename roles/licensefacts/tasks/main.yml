---
  vars:
    bigip_provider:
      user: "{{ user }}"
      password: "{{ password }}"
      server: "{{ ansible_host }}"
      server_port: 443
      validate_certs: false
      no_f5_teem: yes
    is_active: "{{ bigip_gather_var.devices | selectattr('self', 'equalto', 'yes') | map(attribute='failover_state') | first == 'active' }}"
    failover_device_group: "{{ bigip_gather_var.device_groups | selectattr('type', 'equalto', 'sync-failover')  | map(attribute='name') | first | default ('None') }}"
    
- name: Gather facts (f5)
  bigip_device_info:
    provider: "{{ provider }}"
    gather_subset:
      - system-info
      - devices
  register: dev_fact

- name: This can be used to print all facts
  debug:
    var: dev_fact

- name: Task 1 - Display Device Type
  debug:
    var: dev_fact['system_info']['marketing_name']

- name: Task 2 - Platform Name
  debug:
    var: dev_fact['system_info']['platform']

- name: Task3.1 - Capture Service Check Date
  shell: tmsh show sys version | grep "  Version" | awk '{print $2}'
  register: code_version
  tags: code
